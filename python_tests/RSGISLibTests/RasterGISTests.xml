<?xml version="1.0" encoding="UTF-8" ?>
<!--
    Description:
        XML File for execution within RSGISLib
    Created by **ME** on Fri Jul 26 08:34:14 2013.
    Copyright (c) 2013 **Organisation**. All rights reserved.
-->

<rsgis:commands xmlns:rsgis="http://www.rsgislib.org/xml/">

    <rsgis:command algor="commandline" option="execute" command="cp ./RATS/injune_p142_casi_sub_utm_segs.kea ./TestOutputs/RasterGIS/injune_p142_casi_sub_utm_segs_cptab.kea" />
    <rsgis:command algor="rastergis" option="copyGDALATT" table="./RATS/injune_p142_casi_sub_utm_clumps_elim_final_clumps_elim_final.kea" image="./TestOutputs/RasterGIS/injune_p142_casi_sub_utm_segs_cptab.kea" />
	
	<rsgis:command algor="commandline" option="execute" command="cp ./RATS/injune_p142_casi_sub_utm_segs.kea ./TestOutputs/RasterGIS/injune_p142_casi_sub_utm_segs_cpcols.kea" />
	<rsgis:command algor="rastergis" option="copyGDALATTColumns" table="./RATS/injune_p142_casi_sub_utm_clumps_elim_final_clumps_elim_final.kea" image="./TestOutputs/RasterGIS/injune_p142_casi_sub_utm_segs_cpcols.kea" >
		<rsgis:field name="NIRAvg" />
        <rsgis:field name="BlueAvg" />
        <rsgis:field name="GreenAvg" />
        <rsgis:field name="RedAvg" />
    </rsgis:command>
	
	<rsgis:command algor="commandline" option="execute" command="cp ./RATS/injune_p142_casi_sub_utm_clumps_elim_final_clumps_elim_final.kea ./TestOutputs/RasterGIS/injune_p142_casi_sub_utm_segs_spatloc_eucdist.kea" />
	<rsgis:command algor="rastergis" option="spatiallocation" image="./TestOutputs/RasterGIS/injune_p142_casi_sub_utm_segs_spatloc_eucdist.kea" eastings="Easts" northings="Norths" />
    <rsgis:command algor="rastergis" option="eucdistfromfeat" image="./TestOutputs/RasterGIS/injune_p142_casi_sub_utm_segs_spatloc_eucdist.kea" feature="10" outfield="DistTo10" >
		<rsgis:field name="Easts" />
        <rsgis:field name="Norths" />
    </rsgis:command>    
	<rsgis:command algor="rastergis" option="findtopn" image="./TestOutputs/RasterGIS/injune_p142_casi_sub_utm_segs_spatloc_eucdist.kea" spatialdist="DistTo10" metricdist="RedAvg" n="10" distthreshold="100" outfield="Top10Feats" />
	<rsgis:command algor="rastergis" option="findspecclose" image="./TestOutputs/RasterGIS/injune_p142_casi_sub_utm_segs_spatloc_eucdist.kea" spatialdist="DistTo10" metricdist="RedAvg" specdistthreshold="20" spatdistthreshold="100" outfield="Closest2Feat10" />
	
	
	<rsgis:command algor="commandline" option="execute" command="cp ./RATS/injune_p142_casi_sub_utm_segs.kea ./TestOutputs/RasterGIS/injune_p142_casi_sub_utm_segs_popstats.kea" />
	<rsgis:command algor="rastergis" option="popattributestats" clumps="./TestOutputs/RasterGIS/injune_p142_casi_sub_utm_segs_popstats.kea" input="./Rasters/injune_p142_casi_sub_utm.kea" >
        <rsgis:band band="1" min="b1Min" max="b1Max" mean="b1Mean" sum="b1Sum" stddev="b1StdDev" />
        <rsgis:band band="2" min="b2Min" max="b2Max" mean="b2Mean" sum="b2Sum" stddev="b2StdDev" />
        <rsgis:band band="3" min="b3Min" max="b3Max" mean="b3Mean" sum="b3Sum" stddev="b3StdDev" />
    </rsgis:command>
	<rsgis:command algor="rastergis" option="popattributepercentile" clumps="./TestOutputs/RasterGIS/injune_p142_casi_sub_utm_segs_popstats.kea" input="./Rasters/injune_p142_casi_sub_utm.kea" >
        <rsgis:band band="1" name="B1Per25" percentile="25" />
        <rsgis:band band="1" name="B1Per50" percentile="50" />
		<rsgis:band band="1" name="B1Per75" percentile="75" />
    </rsgis:command>
    <!--
	<rsgis:command algor="rastergis" option="popcategoryproportions" clumps="clumps.env" categories="image.env" outcols="string" majority="column name" [majclassname="string" classname="string"] />


	<rsgis:command algor="rastergis" option="copycatcolours" clumps="clumps.env" categories="image.env" classfield="string" />
    -->

    <rsgis:command algor="rastergis" option="export2ascii" table="./RATS/injune_p142_casi_sub_utm_clumps_elim_final_clumps_elim_final.kea" output="./TestOutputs/RasterGIS/injune_p142_casi_rgb_exportascii.txt" >
		<rsgis:field name="BlueAvg" />
        <rsgis:field name="GreenAvg" />
        <rsgis:field name="RedAvg" />
    </rsgis:command>

    <!--
    <rsgis:command algor="rastergis" option="classtranslate" table="input.kea" infield="string" outfield="string" >
		<rsgis:class inid="int" outid="int" />
        <rsgis:class inid="int" outid="int" />
		<rsgis:class inid="int" outid="int" />
    </rsgis:command>
    -->
    <!--
    <rsgis:command algor="rastergis" option="colourclasses" table="input.kea" classfield="string" >
		<rsgis:class id="int" r="int" g="int" b="int" a="int" />
        <rsgis:class id="int" r="int" g="int" b="int" a="int" />
		<rsgis:class id="int" r="int" g="int" b="int" a="int" />
    </rsgis:command>
    -->
    <!--
	<rsgis:command algor="rastergis" option="gencolourtab" table="clumps.env" input="image.env" red="int band" green="int band" blue="int band" />
    -->
    <rsgis:command algor="rastergis" option="exportcols2raster" clumps="./RATS/injune_p142_casi_sub_utm_clumps_elim_final_clumps_elim_final.kea" output="./TestOutputs/RasterGIS/injune_p142_casi_rgb_export.kea" format="KEA" datatype="Float32" >
		<rsgis:field name="BlueAvg" />
        <rsgis:field name="GreenAvg" />
        <rsgis:field name="RedAvg" />
    </rsgis:command>

<!--
	<rsgis:command algor="rastergis" option="strclassmajority" base="image.kea" baseclass="column" info="image.kea" infoclass="column" />
	

	<rsgis:command algor="rastergis" option="classmask" clumps="image.kea" classcolumn="column" class="string" output="image.kea" format="GDAL Format" datatype="Byte | UInt16 | Int16 | UInt32 | Int32 | Float32 | Float64" />
-->

    <rsgis:command algor="commandline" option="execute" command="cp ./RATS/injune_p142_casi_sub_utm_segs.kea ./TestOutputs/RasterGIS/injune_p142_casi_sub_utm_segs_neighbours.kea" />
	<rsgis:command algor="rastergis" option="findneighbours" clumps="./TestOutputs/RasterGIS/injune_p142_casi_sub_utm_segs_neighbours.kea" />


	<rsgis:command algor="rastergis" option="findboundarypixels" clumps="./RATS/injune_p142_casi_sub_utm_segs.kea" output="./TestOutputs/RasterGIS/injune_p142_casi_sub_utm_segs_borpxls.kea" format="KEA" />

    <rsgis:command algor="commandline" option="execute" command="cp ./RATS/injune_p142_casi_sub_utm_segs.kea ./TestOutputs/RasterGIS/injune_p142_casi_sub_utm_segs_borlen.kea" />
	<rsgis:command algor="rastergis" option="calcborderlength" clumps="./TestOutputs/RasterGIS/injune_p142_casi_sub_utm_segs_borlen.kea" ignorezeroedges="yes" colname="borderLen" />

<!--
	<rsgis:command algor="rastergis" option="calcrelborderlength" clumps="clumps.kea" ignorezeroedges="yes | no" colname="string" classcolumn="string" classname="string" />
-->
    
    <rsgis:command algor="commandline" option="execute" command="cp ./RATS/injune_p142_casi_sub_utm_segs.kea ./TestOutputs/RasterGIS/injune_p142_casi_sub_utm_segs_shape.kea" />
    <rsgis:command algor="rastergis" option="calcshapeindices" clumps="./TestOutputs/RasterGIS/injune_p142_casi_sub_utm_segs_shape.kea" >
	   <rsgis:index name="Area" column="Area" />
        <rsgis:index name="Length" column="Length" />
        <rsgis:index name="Width" column="Width" />
        <rsgis:index name="BorderLength" column="BorderLengthIdx" />
        <rsgis:index name="Asymmetry" column="Asymmetry" />
        <rsgis:index name="ShapeIndex" column="ShapeIndex" />
        <rsgis:index name="Density" column="Density" />
        <rsgis:index name="LengthWidth" column="LengthWidthRatio" />
        <rsgis:index name="BorderIndex" column="BorderIndex" />
        <rsgis:index name="Compactness" column="Compactness" />
        <rsgis:index name="MainDirection" column="MainDirection" />
    </rsgis:command>

<!--
	<rsgis:command algor="rastergis" option="defineclumptileposition" clumps="clumps.kea" tile="image.kea" colname="string" overlap="int" boundary="int" body="int" />


	<rsgis:command algor="rastergis" option="defineborderclumps" clumps="clumps.kea" bordermask="image.kea" colname="string" overlap="int" boundary="int" body="int" />
-->

    <rsgis:command algor="commandline" option="execute" command="cp ./RATS/injune_p142_casi_sub_utm_segs_nostats.kea ./TestOutputs/RasterGIS/injune_p142_casi_sub_utm_segs_nostats_addstats.kea" />
	<rsgis:command algor="rastergis" option="populatestats" clumps="./TestOutputs/RasterGIS/injune_p142_casi_sub_utm_segs_nostats_addstats.kea" pyramids="yes" colourtable="yes" />

<!--
	<rsgis:command algor="rastergis" option="findchangeclumpsfromstddev" clumps="clumps.kea" classcol="string" changefield="string" fields="col1,col2,col3" >
		<rsgis:class name="string" stddevthres="float" changeval="int" />
        <rsgis:class name="string" stddevthres="float" changeval="int" />
        <rsgis:class name="string" stddevthres="float" changeval="int" />
    </rsgis:command>
-->
</rsgis:commands>

